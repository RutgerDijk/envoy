---
name: brainstorming
description: Use when starting any new feature, significant change, or when you have an idea that needs design
---

# Brainstorming Ideas Into Designs

## Overview

Turn ideas into fully formed designs AND implementation plans through collaborative dialogue. Produces three artifacts:
1. **Design Document** — Architecture and decisions in `docs/plans/`
2. **GitHub Issue** — Tracking with acceptance criteria
3. **Implementation Plan** — Bite-sized tasks ready for execution

**Announce at start:** "I'm using envoy:brainstorming to design and plan this feature."

## Arguments

| Flag | Effect |
|------|--------|
| (none) | Full flow: design → issue → plan |
| `--design-only` | Stop after design doc + issue (no plan) |

## The Process

### Phase 1: Understanding the Idea

1. Check the current project state (files, docs, recent commits)
2. Ask questions **one at a time** to refine the idea
3. Prefer multiple choice questions when possible
4. Focus on: purpose, constraints, success criteria, affected areas

### Phase 2: Exploring Approaches

1. Propose 2-3 different approaches with trade-offs
2. Lead with your recommended option and explain why
3. Get user confirmation before proceeding

### Phase 3: Presenting the Design

1. Present design in sections of 200-300 words
2. Ask after each section: "Does this look right so far?"
3. Cover: architecture, components, data flow, error handling, testing
4. Be ready to revise based on feedback

### Phase 4: Creating Artifacts

**Create Spec Document:**

Save to `docs/plans/YYYY-MM-DD-<topic>-design.md` with:
- Overview and goal
- Architecture decisions
- Technical approach
- Acceptance criteria
- Open questions

**Create GitHub Issue:**

```bash
gh issue create --title "<Feature Name>" --body "$(cat <<'EOF'
## Summary

<2-3 sentence description>

## Labels

`backend` `frontend` `feature` (choose applicable)

## Linked Spec

[View full design](docs/plans/YYYY-MM-DD-<topic>-design.md)

## Quick Start

```bash
# Create isolated workspace
git worktree add .worktrees/<branch-name> -b feature/<branch-name>
cd .worktrees/<branch-name>
claude
/envoy:pickup <issue-number>
```

## Acceptance Criteria

- [ ] Criterion 1
- [ ] Criterion 2

## Execution Strategy

`parallel` | `batch` | `sequential`

<Rationale for chosen strategy>

---

*Generated by Envoy*
EOF
)" --label "<labels>"
```

### Phase 5: Create Implementation Plan

**Unless `--design-only` flag**, automatically continue to create the implementation plan:

1. Announce: "Design complete. Now creating implementation plan..."
2. Use envoy:writing-plans process to create detailed tasks
3. Save plan to `docs/plans/YYYY-MM-DD-<topic>-plan.md`

**Plan must include:**
- Bite-sized tasks (2-5 min each)
- Exact file paths
- TDD: test files for each task
- Execution strategy (parallel/batch/sequential)

### Phase 6: Final Handoff

"**Ready for implementation!**

**Artifacts created:**
- Design: `docs/plans/<date>-<topic>-design.md`
- Plan: `docs/plans/<date>-<topic>-plan.md` (N tasks)
- Issue: #<number>

**To start implementation:**

Option 1 — New worktree (recommended for larger features):
```bash
/envoy:pickup <issue-number>
```

Option 2 — Execute in current session:
```bash
/envoy:executing-plans docs/plans/<date>-<topic>-plan.md
```

**IMPORTANT:** Always include the exact plan file path when suggesting execution."

## Labels Reference

| Label | When to Use |
|-------|-------------|
| `backend` | Changes to .NET API, services, database |
| `frontend` | Changes to React UI, components, styling |
| `infrastructure` | Docker, Azure, Bicep, CI/CD |
| `security` | Authentication, authorization, security fixes |
| `feature` | New functionality |
| `refactor` | Code restructuring without behavior change |
| `bugfix` | Fixing broken functionality |
| `docs` | Documentation only |

## Key Principles

- **One question at a time** — Don't overwhelm
- **Multiple choice preferred** — Easier to answer
- **YAGNI ruthlessly** — Remove unnecessary features
- **Artifacts are durable** — Everything survives context loss
- **Commit the design doc** — Save to git before creating issue
